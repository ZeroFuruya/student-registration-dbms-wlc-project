<!DOCTYPE html>
<html>
<head>
  <title>doc.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/prettier/doc.js";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>doc.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">factory</span>) </span>{
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">interopModuleDefault</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> <span class="hljs-built_in">module</span> = factory();
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">module</span>.default || <span class="hljs-built_in">module</span>;
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> exports === <span class="hljs-string">"object"</span> &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">module</span> === <span class="hljs-string">"object"</span>) {
    <span class="hljs-built_in">module</span>.exports = interopModuleDefault();
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> define === <span class="hljs-string">"function"</span> &amp;&amp; define.amd) {
    define(interopModuleDefault);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">var</span> root =
      <span class="hljs-keyword">typeof</span> globalThis !== <span class="hljs-string">"undefined"</span>
        ? globalThis
        : <span class="hljs-keyword">typeof</span> global !== <span class="hljs-string">"undefined"</span>
          ? global
          : <span class="hljs-keyword">typeof</span> self !== <span class="hljs-string">"undefined"</span>
            ? self
            : <span class="hljs-keyword">this</span> || {};
    root.doc = interopModuleDefault();
  }
})(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-string">"use strict"</span>;
  <span class="hljs-keyword">var</span> __defProp = <span class="hljs-built_in">Object</span>.defineProperty;
  <span class="hljs-keyword">var</span> __getOwnPropDesc = <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptor;
  <span class="hljs-keyword">var</span> __getOwnPropNames = <span class="hljs-built_in">Object</span>.getOwnPropertyNames;
  <span class="hljs-keyword">var</span> __hasOwnProp = <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty;
  <span class="hljs-keyword">var</span> __export = <span class="hljs-function">(<span class="hljs-params">target, all</span>) =&gt;</span> {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> name <span class="hljs-keyword">in</span> all)
      __defProp(target, name, { <span class="hljs-attr">get</span>: all[name], <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span> });
  };
  <span class="hljs-keyword">var</span> __copyProps = <span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, except, desc</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">from</span> &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">from</span> === <span class="hljs-string">"object"</span> || <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">from</span> === <span class="hljs-string">"function"</span>) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">of</span> __getOwnPropNames(<span class="hljs-keyword">from</span>))
        <span class="hljs-keyword">if</span> (!__hasOwnProp.call(to, key) &amp;&amp; key !== except)
          __defProp(to, key, { <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">from</span>[key], <span class="hljs-attr">enumerable</span>: !(desc = __getOwnPropDesc(<span class="hljs-keyword">from</span>, key)) || desc.enumerable });
    }
    <span class="hljs-keyword">return</span> to;
  };
  <span class="hljs-keyword">var</span> __toCommonJS = <span class="hljs-function">(<span class="hljs-params">mod</span>) =&gt;</span> __copyProps(__defProp({}, <span class="hljs-string">"__esModule"</span>, { <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span> }), mod);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>src/document/public.js</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> public_exports = {};
  __export(public_exports, {
    <span class="hljs-attr">builders</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> builders,
    <span class="hljs-attr">printer</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> printer,
    <span class="hljs-attr">utils</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> utils
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>src/document/constants.js</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> DOC_TYPE_STRING = <span class="hljs-string">"string"</span>;
  <span class="hljs-keyword">var</span> DOC_TYPE_ARRAY = <span class="hljs-string">"array"</span>;
  <span class="hljs-keyword">var</span> DOC_TYPE_CURSOR = <span class="hljs-string">"cursor"</span>;
  <span class="hljs-keyword">var</span> DOC_TYPE_INDENT = <span class="hljs-string">"indent"</span>;
  <span class="hljs-keyword">var</span> DOC_TYPE_ALIGN = <span class="hljs-string">"align"</span>;
  <span class="hljs-keyword">var</span> DOC_TYPE_TRIM = <span class="hljs-string">"trim"</span>;
  <span class="hljs-keyword">var</span> DOC_TYPE_GROUP = <span class="hljs-string">"group"</span>;
  <span class="hljs-keyword">var</span> DOC_TYPE_FILL = <span class="hljs-string">"fill"</span>;
  <span class="hljs-keyword">var</span> DOC_TYPE_IF_BREAK = <span class="hljs-string">"if-break"</span>;
  <span class="hljs-keyword">var</span> DOC_TYPE_INDENT_IF_BREAK = <span class="hljs-string">"indent-if-break"</span>;
  <span class="hljs-keyword">var</span> DOC_TYPE_LINE_SUFFIX = <span class="hljs-string">"line-suffix"</span>;
  <span class="hljs-keyword">var</span> DOC_TYPE_LINE_SUFFIX_BOUNDARY = <span class="hljs-string">"line-suffix-boundary"</span>;
  <span class="hljs-keyword">var</span> DOC_TYPE_LINE = <span class="hljs-string">"line"</span>;
  <span class="hljs-keyword">var</span> DOC_TYPE_LABEL = <span class="hljs-string">"label"</span>;
  <span class="hljs-keyword">var</span> DOC_TYPE_BREAK_PARENT = <span class="hljs-string">"break-parent"</span>;
  <span class="hljs-keyword">var</span> VALID_OBJECT_DOC_TYPES = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([
    DOC_TYPE_CURSOR,
    DOC_TYPE_INDENT,
    DOC_TYPE_ALIGN,
    DOC_TYPE_TRIM,
    DOC_TYPE_GROUP,
    DOC_TYPE_FILL,
    DOC_TYPE_IF_BREAK,
    DOC_TYPE_INDENT_IF_BREAK,
    DOC_TYPE_LINE_SUFFIX,
    DOC_TYPE_LINE_SUFFIX_BOUNDARY,
    DOC_TYPE_LINE,
    DOC_TYPE_LABEL,
    DOC_TYPE_BREAK_PARENT
  ]);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>scripts/build/shims/at.js</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> at = <span class="hljs-function">(<span class="hljs-params">isOptionalObject, object, index</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (isOptionalObject &amp;&amp; (object === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> || object === <span class="hljs-literal">null</span>)) {
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(object) || <span class="hljs-keyword">typeof</span> object === <span class="hljs-string">"string"</span>) {
      <span class="hljs-keyword">return</span> object[index &lt; <span class="hljs-number">0</span> ? object.length + index : index];
    }
    <span class="hljs-keyword">return</span> object.at(index);
  };
  <span class="hljs-keyword">var</span> at_default = at;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>node_modules/trim-newlines/index.js</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">trimNewlinesEnd</span>(<span class="hljs-params">string</span>) </span>{
    <span class="hljs-keyword">let</span> end = string.length;
    <span class="hljs-keyword">while</span> (end &gt; <span class="hljs-number">0</span> &amp;&amp; (string[end - <span class="hljs-number">1</span>] === <span class="hljs-string">"\r"</span> || string[end - <span class="hljs-number">1</span>] === <span class="hljs-string">"\n"</span>)) {
      end--;
    }
    <span class="hljs-keyword">return</span> end &lt; string.length ? string.slice(<span class="hljs-number">0</span>, end) : string;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>src/document/utils/get-doc-type.js</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDocType</span>(<span class="hljs-params">doc</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> doc === <span class="hljs-string">"string"</span>) {
      <span class="hljs-keyword">return</span> DOC_TYPE_STRING;
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(doc)) {
      <span class="hljs-keyword">return</span> DOC_TYPE_ARRAY;
    }
    <span class="hljs-keyword">if</span> (!doc) {
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">const</span> { type } = doc;
    <span class="hljs-keyword">if</span> (VALID_OBJECT_DOC_TYPES.has(type)) {
      <span class="hljs-keyword">return</span> type;
    }
  }
  <span class="hljs-keyword">var</span> get_doc_type_default = getDocType;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<p>src/document/invalid-doc-error.js</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> disjunctionListFormat = <span class="hljs-function">(<span class="hljs-params">list</span>) =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Intl</span>.ListFormat(<span class="hljs-string">"en-US"</span>, { <span class="hljs-attr">type</span>: <span class="hljs-string">"disjunction"</span> }).format(list);
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDocErrorMessage</span>(<span class="hljs-params">doc</span>) </span>{
    <span class="hljs-keyword">const</span> type = doc === <span class="hljs-literal">null</span> ? <span class="hljs-string">"null"</span> : <span class="hljs-keyword">typeof</span> doc;
    <span class="hljs-keyword">if</span> (type !== <span class="hljs-string">"string"</span> &amp;&amp; type !== <span class="hljs-string">"object"</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`Unexpected doc '<span class="hljs-subst">${type}</span>', 
Expected it to be 'string' or 'object'.`</span>;
    }
    <span class="hljs-keyword">if</span> (get_doc_type_default(doc)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"doc is valid."</span>);
    }
    <span class="hljs-keyword">const</span> objectType = <span class="hljs-built_in">Object</span>.prototype.toString.call(doc);
    <span class="hljs-keyword">if</span> (objectType !== <span class="hljs-string">"[object Object]"</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`Unexpected doc '<span class="hljs-subst">${objectType}</span>'.`</span>;
    }
    <span class="hljs-keyword">const</span> EXPECTED_TYPE_VALUES = disjunctionListFormat(
      [...VALID_OBJECT_DOC_TYPES].map(<span class="hljs-function">(<span class="hljs-params">type2</span>) =&gt;</span> <span class="hljs-string">`'<span class="hljs-subst">${type2}</span>'`</span>)
    );
    <span class="hljs-keyword">return</span> <span class="hljs-string">`Unexpected doc.type '<span class="hljs-subst">${doc.type}</span>'.
Expected it to be <span class="hljs-subst">${EXPECTED_TYPE_VALUES}</span>.`</span>;
  }
  <span class="hljs-keyword">var</span> InvalidDocError = <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Error</span> </span>{
    name = <span class="hljs-string">"InvalidDocError"</span>;
    <span class="hljs-keyword">constructor</span>(doc) {
      <span class="hljs-keyword">super</span>(getDocErrorMessage(doc));
      <span class="hljs-keyword">this</span>.doc = doc;
    }
  };
  <span class="hljs-keyword">var</span> invalid_doc_error_default = InvalidDocError;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<p>src/document/utils/traverse-doc.js</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> traverseDocOnExitStackMarker = {};
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">traverseDoc</span>(<span class="hljs-params">doc, onEnter, onExit, shouldTraverseConditionalGroups</span>) </span>{
    <span class="hljs-keyword">const</span> docsStack = [doc];
    <span class="hljs-keyword">while</span> (docsStack.length &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">const</span> doc2 = docsStack.pop();
      <span class="hljs-keyword">if</span> (doc2 === traverseDocOnExitStackMarker) {
        onExit(docsStack.pop());
        <span class="hljs-keyword">continue</span>;
      }
      <span class="hljs-keyword">if</span> (onExit) {
        docsStack.push(doc2, traverseDocOnExitStackMarker);
      }
      <span class="hljs-keyword">const</span> docType = get_doc_type_default(doc2);
      <span class="hljs-keyword">if</span> (!docType) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> invalid_doc_error_default(doc2);
      }
      <span class="hljs-keyword">if</span> ((onEnter == <span class="hljs-literal">null</span> ? <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> : onEnter(doc2)) === <span class="hljs-literal">false</span>) {
        <span class="hljs-keyword">continue</span>;
      }
      <span class="hljs-keyword">switch</span> (docType) {
        <span class="hljs-keyword">case</span> DOC_TYPE_ARRAY:
        <span class="hljs-keyword">case</span> DOC_TYPE_FILL: {
          <span class="hljs-keyword">const</span> parts = docType === DOC_TYPE_ARRAY ? doc2 : doc2.parts;
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> ic = parts.length, i = ic - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; --i) {
            docsStack.push(parts[i]);
          }
          <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">case</span> DOC_TYPE_IF_BREAK:
          docsStack.push(doc2.flatContents, doc2.breakContents);
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOC_TYPE_GROUP:
          <span class="hljs-keyword">if</span> (shouldTraverseConditionalGroups &amp;&amp; doc2.expandedStates) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> ic = doc2.expandedStates.length, i = ic - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; --i) {
              docsStack.push(doc2.expandedStates[i]);
            }
          } <span class="hljs-keyword">else</span> {
            docsStack.push(doc2.contents);
          }
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOC_TYPE_ALIGN:
        <span class="hljs-keyword">case</span> DOC_TYPE_INDENT:
        <span class="hljs-keyword">case</span> DOC_TYPE_INDENT_IF_BREAK:
        <span class="hljs-keyword">case</span> DOC_TYPE_LABEL:
        <span class="hljs-keyword">case</span> DOC_TYPE_LINE_SUFFIX:
          docsStack.push(doc2.contents);
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOC_TYPE_STRING:
        <span class="hljs-keyword">case</span> DOC_TYPE_CURSOR:
        <span class="hljs-keyword">case</span> DOC_TYPE_TRIM:
        <span class="hljs-keyword">case</span> DOC_TYPE_LINE_SUFFIX_BOUNDARY:
        <span class="hljs-keyword">case</span> DOC_TYPE_LINE:
        <span class="hljs-keyword">case</span> DOC_TYPE_BREAK_PARENT:
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">default</span>:
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> invalid_doc_error_default(doc2);
      }
    }
  }
  <span class="hljs-keyword">var</span> traverse_doc_default = traverseDoc;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<p>src/document/utils.js</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mapDoc</span>(<span class="hljs-params">doc, cb</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> doc === <span class="hljs-string">"string"</span>) {
      <span class="hljs-keyword">return</span> cb(doc);
    }
    <span class="hljs-keyword">const</span> mapped = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();
    <span class="hljs-keyword">return</span> rec(doc);
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rec</span>(<span class="hljs-params">doc2</span>) </span>{
      <span class="hljs-keyword">if</span> (mapped.has(doc2)) {
        <span class="hljs-keyword">return</span> mapped.get(doc2);
      }
      <span class="hljs-keyword">const</span> result = process2(doc2);
      mapped.set(doc2, result);
      <span class="hljs-keyword">return</span> result;
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">process2</span>(<span class="hljs-params">doc2</span>) </span>{
      <span class="hljs-keyword">switch</span> (get_doc_type_default(doc2)) {
        <span class="hljs-keyword">case</span> DOC_TYPE_ARRAY:
          <span class="hljs-keyword">return</span> cb(doc2.map(rec));
        <span class="hljs-keyword">case</span> DOC_TYPE_FILL:
          <span class="hljs-keyword">return</span> cb({ ...doc2, <span class="hljs-attr">parts</span>: doc2.parts.map(rec) });
        <span class="hljs-keyword">case</span> DOC_TYPE_IF_BREAK:
          <span class="hljs-keyword">return</span> cb({
            ...doc2,
            <span class="hljs-attr">breakContents</span>: rec(doc2.breakContents),
            <span class="hljs-attr">flatContents</span>: rec(doc2.flatContents)
          });
        <span class="hljs-keyword">case</span> DOC_TYPE_GROUP: {
          <span class="hljs-keyword">let</span> { expandedStates, contents } = doc2;
          <span class="hljs-keyword">if</span> (expandedStates) {
            expandedStates = expandedStates.map(rec);
            contents = expandedStates[<span class="hljs-number">0</span>];
          } <span class="hljs-keyword">else</span> {
            contents = rec(contents);
          }
          <span class="hljs-keyword">return</span> cb({ ...doc2, contents, expandedStates });
        }
        <span class="hljs-keyword">case</span> DOC_TYPE_ALIGN:
        <span class="hljs-keyword">case</span> DOC_TYPE_INDENT:
        <span class="hljs-keyword">case</span> DOC_TYPE_INDENT_IF_BREAK:
        <span class="hljs-keyword">case</span> DOC_TYPE_LABEL:
        <span class="hljs-keyword">case</span> DOC_TYPE_LINE_SUFFIX:
          <span class="hljs-keyword">return</span> cb({ ...doc2, <span class="hljs-attr">contents</span>: rec(doc2.contents) });
        <span class="hljs-keyword">case</span> DOC_TYPE_STRING:
        <span class="hljs-keyword">case</span> DOC_TYPE_CURSOR:
        <span class="hljs-keyword">case</span> DOC_TYPE_TRIM:
        <span class="hljs-keyword">case</span> DOC_TYPE_LINE_SUFFIX_BOUNDARY:
        <span class="hljs-keyword">case</span> DOC_TYPE_LINE:
        <span class="hljs-keyword">case</span> DOC_TYPE_BREAK_PARENT:
          <span class="hljs-keyword">return</span> cb(doc2);
        <span class="hljs-keyword">default</span>:
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> invalid_doc_error_default(doc2);
      }
    }
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findInDoc</span>(<span class="hljs-params">doc, fn, defaultValue</span>) </span>{
    <span class="hljs-keyword">let</span> result = defaultValue;
    <span class="hljs-keyword">let</span> shouldSkipFurtherProcessing = <span class="hljs-literal">false</span>;
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findInDocOnEnterFn</span>(<span class="hljs-params">doc2</span>) </span>{
      <span class="hljs-keyword">if</span> (shouldSkipFurtherProcessing) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
      <span class="hljs-keyword">const</span> maybeResult = fn(doc2);
      <span class="hljs-keyword">if</span> (maybeResult !== <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>) {
        shouldSkipFurtherProcessing = <span class="hljs-literal">true</span>;
        result = maybeResult;
      }
    }
    traverse_doc_default(doc, findInDocOnEnterFn);
    <span class="hljs-keyword">return</span> result;
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">willBreakFn</span>(<span class="hljs-params">doc</span>) </span>{
    <span class="hljs-keyword">if</span> (doc.type === DOC_TYPE_GROUP &amp;&amp; doc.break) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">if</span> (doc.type === DOC_TYPE_LINE &amp;&amp; doc.hard) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">if</span> (doc.type === DOC_TYPE_BREAK_PARENT) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">willBreak</span>(<span class="hljs-params">doc</span>) </span>{
    <span class="hljs-keyword">return</span> findInDoc(doc, willBreakFn, <span class="hljs-literal">false</span>);
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">breakParentGroup</span>(<span class="hljs-params">groupStack</span>) </span>{
    <span class="hljs-keyword">if</span> (groupStack.length &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">const</span> parentGroup = at_default(
        <span class="hljs-comment">/* isOptionalObject */</span>
        <span class="hljs-literal">false</span>,
        groupStack,
        <span class="hljs-number">-1</span>
      );
      <span class="hljs-keyword">if</span> (!parentGroup.expandedStates &amp;&amp; !parentGroup.break) {
        parentGroup.break = <span class="hljs-string">"propagated"</span>;
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">propagateBreaks</span>(<span class="hljs-params">doc</span>) </span>{
    <span class="hljs-keyword">const</span> alreadyVisitedSet = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>();
    <span class="hljs-keyword">const</span> groupStack = [];
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">propagateBreaksOnEnterFn</span>(<span class="hljs-params">doc2</span>) </span>{
      <span class="hljs-keyword">if</span> (doc2.type === DOC_TYPE_BREAK_PARENT) {
        breakParentGroup(groupStack);
      }
      <span class="hljs-keyword">if</span> (doc2.type === DOC_TYPE_GROUP) {
        groupStack.push(doc2);
        <span class="hljs-keyword">if</span> (alreadyVisitedSet.has(doc2)) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        alreadyVisitedSet.add(doc2);
      }
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">propagateBreaksOnExitFn</span>(<span class="hljs-params">doc2</span>) </span>{
      <span class="hljs-keyword">if</span> (doc2.type === DOC_TYPE_GROUP) {
        <span class="hljs-keyword">const</span> group2 = groupStack.pop();
        <span class="hljs-keyword">if</span> (group2.break) {
          breakParentGroup(groupStack);
        }
      }
    }
    traverse_doc_default(
      doc,
      propagateBreaksOnEnterFn,
      propagateBreaksOnExitFn,
      <span class="hljs-comment">/* shouldTraverseConditionalGroups */</span>
      <span class="hljs-literal">true</span>
    );
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeLinesFn</span>(<span class="hljs-params">doc</span>) </span>{
    <span class="hljs-keyword">if</span> (doc.type === DOC_TYPE_LINE &amp;&amp; !doc.hard) {
      <span class="hljs-keyword">return</span> doc.soft ? <span class="hljs-string">""</span> : <span class="hljs-string">" "</span>;
    }
    <span class="hljs-keyword">if</span> (doc.type === DOC_TYPE_IF_BREAK) {
      <span class="hljs-keyword">return</span> doc.flatContents;
    }
    <span class="hljs-keyword">return</span> doc;
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeLines</span>(<span class="hljs-params">doc</span>) </span>{
    <span class="hljs-keyword">return</span> mapDoc(doc, removeLinesFn);
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stripTrailingHardlineFromParts</span>(<span class="hljs-params">parts</span>) </span>{
    parts = [...parts];
    <span class="hljs-keyword">while</span> (parts.length &gt;= <span class="hljs-number">2</span> &amp;&amp; at_default(
      <span class="hljs-comment">/* isOptionalObject */</span>
      <span class="hljs-literal">false</span>,
      parts,
      <span class="hljs-number">-2</span>
    ).type === DOC_TYPE_LINE &amp;&amp; at_default(
      <span class="hljs-comment">/* isOptionalObject */</span>
      <span class="hljs-literal">false</span>,
      parts,
      <span class="hljs-number">-1</span>
    ).type === DOC_TYPE_BREAK_PARENT) {
      parts.length -= <span class="hljs-number">2</span>;
    }
    <span class="hljs-keyword">if</span> (parts.length &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">const</span> lastPart = stripTrailingHardlineFromDoc(at_default(
        <span class="hljs-comment">/* isOptionalObject */</span>
        <span class="hljs-literal">false</span>,
        parts,
        <span class="hljs-number">-1</span>
      ));
      parts[parts.length - <span class="hljs-number">1</span>] = lastPart;
    }
    <span class="hljs-keyword">return</span> parts;
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stripTrailingHardlineFromDoc</span>(<span class="hljs-params">doc</span>) </span>{
    <span class="hljs-keyword">switch</span> (get_doc_type_default(doc)) {
      <span class="hljs-keyword">case</span> DOC_TYPE_INDENT:
      <span class="hljs-keyword">case</span> DOC_TYPE_INDENT_IF_BREAK:
      <span class="hljs-keyword">case</span> DOC_TYPE_GROUP:
      <span class="hljs-keyword">case</span> DOC_TYPE_LINE_SUFFIX:
      <span class="hljs-keyword">case</span> DOC_TYPE_LABEL: {
        <span class="hljs-keyword">const</span> contents = stripTrailingHardlineFromDoc(doc.contents);
        <span class="hljs-keyword">return</span> { ...doc, contents };
      }
      <span class="hljs-keyword">case</span> DOC_TYPE_IF_BREAK:
        <span class="hljs-keyword">return</span> {
          ...doc,
          <span class="hljs-attr">breakContents</span>: stripTrailingHardlineFromDoc(doc.breakContents),
          <span class="hljs-attr">flatContents</span>: stripTrailingHardlineFromDoc(doc.flatContents)
        };
      <span class="hljs-keyword">case</span> DOC_TYPE_FILL:
        <span class="hljs-keyword">return</span> { ...doc, <span class="hljs-attr">parts</span>: stripTrailingHardlineFromParts(doc.parts) };
      <span class="hljs-keyword">case</span> DOC_TYPE_ARRAY:
        <span class="hljs-keyword">return</span> stripTrailingHardlineFromParts(doc);
      <span class="hljs-keyword">case</span> DOC_TYPE_STRING:
        <span class="hljs-keyword">return</span> trimNewlinesEnd(doc);
      <span class="hljs-keyword">case</span> DOC_TYPE_ALIGN:
      <span class="hljs-keyword">case</span> DOC_TYPE_CURSOR:
      <span class="hljs-keyword">case</span> DOC_TYPE_TRIM:
      <span class="hljs-keyword">case</span> DOC_TYPE_LINE_SUFFIX_BOUNDARY:
      <span class="hljs-keyword">case</span> DOC_TYPE_LINE:
      <span class="hljs-keyword">case</span> DOC_TYPE_BREAK_PARENT:
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> invalid_doc_error_default(doc);
    }
    <span class="hljs-keyword">return</span> doc;
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stripTrailingHardline</span>(<span class="hljs-params">doc</span>) </span>{
    <span class="hljs-keyword">return</span> stripTrailingHardlineFromDoc(cleanDoc(doc));
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cleanDocFn</span>(<span class="hljs-params">doc</span>) </span>{
    <span class="hljs-keyword">switch</span> (get_doc_type_default(doc)) {
      <span class="hljs-keyword">case</span> DOC_TYPE_FILL:
        <span class="hljs-keyword">if</span> (doc.parts.every(<span class="hljs-function">(<span class="hljs-params">part</span>) =&gt;</span> part === <span class="hljs-string">""</span>)) {
          <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> DOC_TYPE_GROUP:
        <span class="hljs-keyword">if</span> (!doc.contents &amp;&amp; !doc.id &amp;&amp; !doc.break &amp;&amp; !doc.expandedStates) {
          <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
        }
        <span class="hljs-keyword">if</span> (doc.contents.type === DOC_TYPE_GROUP &amp;&amp; doc.contents.id === doc.id &amp;&amp; doc.contents.break === doc.break &amp;&amp; doc.contents.expandedStates === doc.expandedStates) {
          <span class="hljs-keyword">return</span> doc.contents;
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> DOC_TYPE_ALIGN:
      <span class="hljs-keyword">case</span> DOC_TYPE_INDENT:
      <span class="hljs-keyword">case</span> DOC_TYPE_INDENT_IF_BREAK:
      <span class="hljs-keyword">case</span> DOC_TYPE_LINE_SUFFIX:
        <span class="hljs-keyword">if</span> (!doc.contents) {
          <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> DOC_TYPE_IF_BREAK:
        <span class="hljs-keyword">if</span> (!doc.flatContents &amp;&amp; !doc.breakContents) {
          <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> DOC_TYPE_ARRAY: {
        <span class="hljs-keyword">const</span> parts = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> part <span class="hljs-keyword">of</span> doc) {
          <span class="hljs-keyword">if</span> (!part) {
            <span class="hljs-keyword">continue</span>;
          }
          <span class="hljs-keyword">const</span> [currentPart, ...restParts] = <span class="hljs-built_in">Array</span>.isArray(part) ? part : [part];
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> currentPart === <span class="hljs-string">"string"</span> &amp;&amp; <span class="hljs-keyword">typeof</span> at_default(
            <span class="hljs-comment">/* isOptionalObject */</span>
            <span class="hljs-literal">false</span>,
            parts,
            <span class="hljs-number">-1</span>
          ) === <span class="hljs-string">"string"</span>) {
            parts[parts.length - <span class="hljs-number">1</span>] += currentPart;
          } <span class="hljs-keyword">else</span> {
            parts.push(currentPart);
          }
          parts.push(...restParts);
        }
        <span class="hljs-keyword">if</span> (parts.length === <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
        }
        <span class="hljs-keyword">if</span> (parts.length === <span class="hljs-number">1</span>) {
          <span class="hljs-keyword">return</span> parts[<span class="hljs-number">0</span>];
        }
        <span class="hljs-keyword">return</span> parts;
      }
      <span class="hljs-keyword">case</span> DOC_TYPE_STRING:
      <span class="hljs-keyword">case</span> DOC_TYPE_CURSOR:
      <span class="hljs-keyword">case</span> DOC_TYPE_TRIM:
      <span class="hljs-keyword">case</span> DOC_TYPE_LINE_SUFFIX_BOUNDARY:
      <span class="hljs-keyword">case</span> DOC_TYPE_LINE:
      <span class="hljs-keyword">case</span> DOC_TYPE_LABEL:
      <span class="hljs-keyword">case</span> DOC_TYPE_BREAK_PARENT:
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> invalid_doc_error_default(doc);
    }
    <span class="hljs-keyword">return</span> doc;
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cleanDoc</span>(<span class="hljs-params">doc</span>) </span>{
    <span class="hljs-keyword">return</span> mapDoc(doc, (currentDoc) =&gt; cleanDocFn(currentDoc));
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceEndOfLine</span>(<span class="hljs-params">doc, replacement = literalline</span>) </span>{
    <span class="hljs-keyword">return</span> mapDoc(
      doc,
      (currentDoc) =&gt; <span class="hljs-keyword">typeof</span> currentDoc === <span class="hljs-string">"string"</span> ? join(replacement, currentDoc.split(<span class="hljs-string">"\n"</span>)) : currentDoc
    );
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">canBreakFn</span>(<span class="hljs-params">doc</span>) </span>{
    <span class="hljs-keyword">if</span> (doc.type === DOC_TYPE_LINE) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">canBreak</span>(<span class="hljs-params">doc</span>) </span>{
    <span class="hljs-keyword">return</span> findInDoc(doc, canBreakFn, <span class="hljs-literal">false</span>);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>src/document/utils/assert-doc.js</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> noop = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  };
  <span class="hljs-keyword">var</span> assertDoc = <span class="hljs-literal">true</span> ? noop : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">doc</span>) </span>{
    traverse_doc_default(doc, (doc2) =&gt; {
      <span class="hljs-keyword">if</span> (checked.has(doc2)) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> doc2 !== <span class="hljs-string">"string"</span>) {
        checked.add(doc2);
      }
    });
  };
  <span class="hljs-keyword">var</span> assertDocArray = <span class="hljs-literal">true</span> ? noop : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">docs, optional = false</span>) </span>{
    <span class="hljs-keyword">if</span> (optional &amp;&amp; !docs) {
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">Array</span>.isArray(docs)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">"Unexpected doc array."</span>);
    }
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> doc <span class="hljs-keyword">of</span> docs) {
      assertDoc(doc);
    }
  };
  <span class="hljs-keyword">var</span> assertDocFillParts = <span class="hljs-literal">true</span> ? noop : (
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">parts</span>
<span class="dox_type">Array.&lt;Doc&gt;</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">parts</span>) </span>{
      assertDocArray(parts);
      <span class="hljs-keyword">if</span> (parts.length &gt; <span class="hljs-number">1</span> &amp;&amp; isEmptyDoc(at_default(
        <span class="hljs-comment">/* isOptionalObject */</span>
        <span class="hljs-literal">false</span>,
        parts,
        <span class="hljs-number">-1</span>
      ))) {
        parts = parts.slice(<span class="hljs-number">0</span>, <span class="hljs-number">-1</span>);
      }
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [i, doc] <span class="hljs-keyword">of</span> parts.entries()) {
        <span class="hljs-keyword">if</span> (i % <span class="hljs-number">2</span> === <span class="hljs-number">1</span> &amp;&amp; !isValidSeparator(doc)) {
          <span class="hljs-keyword">const</span> type = get_doc_type_default(doc);
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(
            <span class="hljs-string">`Unexpected non-line-break doc at <span class="hljs-subst">${i}</span>. Doc type is <span class="hljs-subst">${type}</span>.`</span>
          );
        }
      }
    }
  );

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<p>src/document/builders.js</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">indent</span>(<span class="hljs-params">contents</span>) </span>{
    assertDoc(contents);
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">type</span>: DOC_TYPE_INDENT, contents };
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">align</span>(<span class="hljs-params">widthOrString, contents</span>) </span>{
    assertDoc(contents);
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">type</span>: DOC_TYPE_ALIGN, contents, <span class="hljs-attr">n</span>: widthOrString };
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">group</span>(<span class="hljs-params">contents, opts = {}</span>) </span>{
    assertDoc(contents);
    assertDocArray(
      opts.expandedStates,
      <span class="hljs-comment">/* optional */</span>
      <span class="hljs-literal">true</span>
    );
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">type</span>: DOC_TYPE_GROUP,
      <span class="hljs-attr">id</span>: opts.id,
      contents,
      <span class="hljs-attr">break</span>: <span class="hljs-built_in">Boolean</span>(opts.shouldBreak),
      <span class="hljs-attr">expandedStates</span>: opts.expandedStates
    };
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dedentToRoot</span>(<span class="hljs-params">contents</span>) </span>{
    <span class="hljs-keyword">return</span> align(<span class="hljs-built_in">Number</span>.NEGATIVE_INFINITY, contents);
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">markAsRoot</span>(<span class="hljs-params">contents</span>) </span>{
    <span class="hljs-keyword">return</span> align({ <span class="hljs-attr">type</span>: <span class="hljs-string">"root"</span> }, contents);
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dedent</span>(<span class="hljs-params">contents</span>) </span>{
    <span class="hljs-keyword">return</span> align(<span class="hljs-number">-1</span>, contents);
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">conditionalGroup</span>(<span class="hljs-params">states, opts</span>) </span>{
    <span class="hljs-keyword">return</span> group(states[<span class="hljs-number">0</span>], { ...opts, <span class="hljs-attr">expandedStates</span>: states });
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fill</span>(<span class="hljs-params">parts</span>) </span>{
    assertDocFillParts(parts);
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">type</span>: DOC_TYPE_FILL, parts };
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ifBreak</span>(<span class="hljs-params">breakContents, flatContents = <span class="hljs-string">""</span>, opts = {}</span>) </span>{
    assertDoc(breakContents);
    <span class="hljs-keyword">if</span> (flatContents !== <span class="hljs-string">""</span>) {
      assertDoc(flatContents);
    }
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">type</span>: DOC_TYPE_IF_BREAK,
      breakContents,
      flatContents,
      <span class="hljs-attr">groupId</span>: opts.groupId
    };
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">indentIfBreak</span>(<span class="hljs-params">contents, opts</span>) </span>{
    assertDoc(contents);
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">type</span>: DOC_TYPE_INDENT_IF_BREAK,
      contents,
      <span class="hljs-attr">groupId</span>: opts.groupId,
      <span class="hljs-attr">negate</span>: opts.negate
    };
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lineSuffix</span>(<span class="hljs-params">contents</span>) </span>{
    assertDoc(contents);
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">type</span>: DOC_TYPE_LINE_SUFFIX, contents };
  }
  <span class="hljs-keyword">var</span> lineSuffixBoundary = { <span class="hljs-attr">type</span>: DOC_TYPE_LINE_SUFFIX_BOUNDARY };
  <span class="hljs-keyword">var</span> breakParent = { <span class="hljs-attr">type</span>: DOC_TYPE_BREAK_PARENT };
  <span class="hljs-keyword">var</span> trim = { <span class="hljs-attr">type</span>: DOC_TYPE_TRIM };
  <span class="hljs-keyword">var</span> hardlineWithoutBreakParent = { <span class="hljs-attr">type</span>: DOC_TYPE_LINE, <span class="hljs-attr">hard</span>: <span class="hljs-literal">true</span> };
  <span class="hljs-keyword">var</span> literallineWithoutBreakParent = {
    <span class="hljs-attr">type</span>: DOC_TYPE_LINE,
    <span class="hljs-attr">hard</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">literal</span>: <span class="hljs-literal">true</span>
  };
  <span class="hljs-keyword">var</span> line = { <span class="hljs-attr">type</span>: DOC_TYPE_LINE };
  <span class="hljs-keyword">var</span> softline = { <span class="hljs-attr">type</span>: DOC_TYPE_LINE, <span class="hljs-attr">soft</span>: <span class="hljs-literal">true</span> };
  <span class="hljs-keyword">var</span> hardline = [hardlineWithoutBreakParent, breakParent];
  <span class="hljs-keyword">var</span> literalline = [literallineWithoutBreakParent, breakParent];
  <span class="hljs-keyword">var</span> cursor = { <span class="hljs-attr">type</span>: DOC_TYPE_CURSOR };
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">join</span>(<span class="hljs-params">separator, docs</span>) </span>{
    assertDoc(separator);
    assertDocArray(docs);
    <span class="hljs-keyword">const</span> parts = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; docs.length; i++) {
      <span class="hljs-keyword">if</span> (i !== <span class="hljs-number">0</span>) {
        parts.push(separator);
      }
      parts.push(docs[i]);
    }
    <span class="hljs-keyword">return</span> parts;
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addAlignmentToDoc</span>(<span class="hljs-params">doc, size, tabWidth</span>) </span>{
    assertDoc(doc);
    <span class="hljs-keyword">let</span> aligned = doc;
    <span class="hljs-keyword">if</span> (size &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">Math</span>.floor(size / tabWidth); ++i) {
        aligned = indent(aligned);
      }
      aligned = align(size % tabWidth, aligned);
      aligned = align(<span class="hljs-built_in">Number</span>.NEGATIVE_INFINITY, aligned);
    }
    <span class="hljs-keyword">return</span> aligned;
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">label</span>(<span class="hljs-params">label2, contents</span>) </span>{
    assertDoc(contents);
    <span class="hljs-keyword">return</span> label2 ? { <span class="hljs-attr">type</span>: DOC_TYPE_LABEL, <span class="hljs-attr">label</span>: label2, contents } : contents;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<p>scripts/build/shims/string-replace-all.js</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> stringReplaceAll = <span class="hljs-function">(<span class="hljs-params">isOptionalObject, original, pattern, replacement</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (isOptionalObject &amp;&amp; (original === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> || original === <span class="hljs-literal">null</span>)) {
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (original.replaceAll) {
      <span class="hljs-keyword">return</span> original.replaceAll(pattern, replacement);
    }
    <span class="hljs-keyword">if</span> (pattern.global) {
      <span class="hljs-keyword">return</span> original.replace(pattern, replacement);
    }
    <span class="hljs-keyword">return</span> original.split(pattern).join(replacement);
  };
  <span class="hljs-keyword">var</span> string_replace_all_default = stringReplaceAll;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<p>src/common/end-of-line.js</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">convertEndOfLineToChars</span>(<span class="hljs-params">value</span>) </span>{
    <span class="hljs-keyword">switch</span> (value) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">"cr"</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"\r"</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">"crlf"</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"\r\n"</span>;
      <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"\n"</span>;
    }
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<p>node_modules/emoji-regex/index.mjs</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> emoji_regex_default = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-regexp">/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC2\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g</span>;
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<p>node_modules/get-east-asian-width/lookup.js</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isFullWidth</span>(<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">return</span> x === <span class="hljs-number">12288</span> || x &gt;= <span class="hljs-number">65281</span> &amp;&amp; x &lt;= <span class="hljs-number">65376</span> || x &gt;= <span class="hljs-number">65504</span> &amp;&amp; x &lt;= <span class="hljs-number">65510</span>;
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isWide</span>(<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">return</span> x &gt;= <span class="hljs-number">4352</span> &amp;&amp; x &lt;= <span class="hljs-number">4447</span> || x === <span class="hljs-number">8986</span> || x === <span class="hljs-number">8987</span> || x === <span class="hljs-number">9001</span> || x === <span class="hljs-number">9002</span> || x &gt;= <span class="hljs-number">9193</span> &amp;&amp; x &lt;= <span class="hljs-number">9196</span> || x === <span class="hljs-number">9200</span> || x === <span class="hljs-number">9203</span> || x === <span class="hljs-number">9725</span> || x === <span class="hljs-number">9726</span> || x === <span class="hljs-number">9748</span> || x === <span class="hljs-number">9749</span> || x &gt;= <span class="hljs-number">9776</span> &amp;&amp; x &lt;= <span class="hljs-number">9783</span> || x &gt;= <span class="hljs-number">9800</span> &amp;&amp; x &lt;= <span class="hljs-number">9811</span> || x === <span class="hljs-number">9855</span> || x &gt;= <span class="hljs-number">9866</span> &amp;&amp; x &lt;= <span class="hljs-number">9871</span> || x === <span class="hljs-number">9875</span> || x === <span class="hljs-number">9889</span> || x === <span class="hljs-number">9898</span> || x === <span class="hljs-number">9899</span> || x === <span class="hljs-number">9917</span> || x === <span class="hljs-number">9918</span> || x === <span class="hljs-number">9924</span> || x === <span class="hljs-number">9925</span> || x === <span class="hljs-number">9934</span> || x === <span class="hljs-number">9940</span> || x === <span class="hljs-number">9962</span> || x === <span class="hljs-number">9970</span> || x === <span class="hljs-number">9971</span> || x === <span class="hljs-number">9973</span> || x === <span class="hljs-number">9978</span> || x === <span class="hljs-number">9981</span> || x === <span class="hljs-number">9989</span> || x === <span class="hljs-number">9994</span> || x === <span class="hljs-number">9995</span> || x === <span class="hljs-number">10024</span> || x === <span class="hljs-number">10060</span> || x === <span class="hljs-number">10062</span> || x &gt;= <span class="hljs-number">10067</span> &amp;&amp; x &lt;= <span class="hljs-number">10069</span> || x === <span class="hljs-number">10071</span> || x &gt;= <span class="hljs-number">10133</span> &amp;&amp; x &lt;= <span class="hljs-number">10135</span> || x === <span class="hljs-number">10160</span> || x === <span class="hljs-number">10175</span> || x === <span class="hljs-number">11035</span> || x === <span class="hljs-number">11036</span> || x === <span class="hljs-number">11088</span> || x === <span class="hljs-number">11093</span> || x &gt;= <span class="hljs-number">11904</span> &amp;&amp; x &lt;= <span class="hljs-number">11929</span> || x &gt;= <span class="hljs-number">11931</span> &amp;&amp; x &lt;= <span class="hljs-number">12019</span> || x &gt;= <span class="hljs-number">12032</span> &amp;&amp; x &lt;= <span class="hljs-number">12245</span> || x &gt;= <span class="hljs-number">12272</span> &amp;&amp; x &lt;= <span class="hljs-number">12287</span> || x &gt;= <span class="hljs-number">12289</span> &amp;&amp; x &lt;= <span class="hljs-number">12350</span> || x &gt;= <span class="hljs-number">12353</span> &amp;&amp; x &lt;= <span class="hljs-number">12438</span> || x &gt;= <span class="hljs-number">12441</span> &amp;&amp; x &lt;= <span class="hljs-number">12543</span> || x &gt;= <span class="hljs-number">12549</span> &amp;&amp; x &lt;= <span class="hljs-number">12591</span> || x &gt;= <span class="hljs-number">12593</span> &amp;&amp; x &lt;= <span class="hljs-number">12686</span> || x &gt;= <span class="hljs-number">12688</span> &amp;&amp; x &lt;= <span class="hljs-number">12773</span> || x &gt;= <span class="hljs-number">12783</span> &amp;&amp; x &lt;= <span class="hljs-number">12830</span> || x &gt;= <span class="hljs-number">12832</span> &amp;&amp; x &lt;= <span class="hljs-number">12871</span> || x &gt;= <span class="hljs-number">12880</span> &amp;&amp; x &lt;= <span class="hljs-number">42124</span> || x &gt;= <span class="hljs-number">42128</span> &amp;&amp; x &lt;= <span class="hljs-number">42182</span> || x &gt;= <span class="hljs-number">43360</span> &amp;&amp; x &lt;= <span class="hljs-number">43388</span> || x &gt;= <span class="hljs-number">44032</span> &amp;&amp; x &lt;= <span class="hljs-number">55203</span> || x &gt;= <span class="hljs-number">63744</span> &amp;&amp; x &lt;= <span class="hljs-number">64255</span> || x &gt;= <span class="hljs-number">65040</span> &amp;&amp; x &lt;= <span class="hljs-number">65049</span> || x &gt;= <span class="hljs-number">65072</span> &amp;&amp; x &lt;= <span class="hljs-number">65106</span> || x &gt;= <span class="hljs-number">65108</span> &amp;&amp; x &lt;= <span class="hljs-number">65126</span> || x &gt;= <span class="hljs-number">65128</span> &amp;&amp; x &lt;= <span class="hljs-number">65131</span> || x &gt;= <span class="hljs-number">94176</span> &amp;&amp; x &lt;= <span class="hljs-number">94180</span> || x === <span class="hljs-number">94192</span> || x === <span class="hljs-number">94193</span> || x &gt;= <span class="hljs-number">94208</span> &amp;&amp; x &lt;= <span class="hljs-number">100343</span> || x &gt;= <span class="hljs-number">100352</span> &amp;&amp; x &lt;= <span class="hljs-number">101589</span> || x &gt;= <span class="hljs-number">101631</span> &amp;&amp; x &lt;= <span class="hljs-number">101640</span> || x &gt;= <span class="hljs-number">110576</span> &amp;&amp; x &lt;= <span class="hljs-number">110579</span> || x &gt;= <span class="hljs-number">110581</span> &amp;&amp; x &lt;= <span class="hljs-number">110587</span> || x === <span class="hljs-number">110589</span> || x === <span class="hljs-number">110590</span> || x &gt;= <span class="hljs-number">110592</span> &amp;&amp; x &lt;= <span class="hljs-number">110882</span> || x === <span class="hljs-number">110898</span> || x &gt;= <span class="hljs-number">110928</span> &amp;&amp; x &lt;= <span class="hljs-number">110930</span> || x === <span class="hljs-number">110933</span> || x &gt;= <span class="hljs-number">110948</span> &amp;&amp; x &lt;= <span class="hljs-number">110951</span> || x &gt;= <span class="hljs-number">110960</span> &amp;&amp; x &lt;= <span class="hljs-number">111355</span> || x &gt;= <span class="hljs-number">119552</span> &amp;&amp; x &lt;= <span class="hljs-number">119638</span> || x &gt;= <span class="hljs-number">119648</span> &amp;&amp; x &lt;= <span class="hljs-number">119670</span> || x === <span class="hljs-number">126980</span> || x === <span class="hljs-number">127183</span> || x === <span class="hljs-number">127374</span> || x &gt;= <span class="hljs-number">127377</span> &amp;&amp; x &lt;= <span class="hljs-number">127386</span> || x &gt;= <span class="hljs-number">127488</span> &amp;&amp; x &lt;= <span class="hljs-number">127490</span> || x &gt;= <span class="hljs-number">127504</span> &amp;&amp; x &lt;= <span class="hljs-number">127547</span> || x &gt;= <span class="hljs-number">127552</span> &amp;&amp; x &lt;= <span class="hljs-number">127560</span> || x === <span class="hljs-number">127568</span> || x === <span class="hljs-number">127569</span> || x &gt;= <span class="hljs-number">127584</span> &amp;&amp; x &lt;= <span class="hljs-number">127589</span> || x &gt;= <span class="hljs-number">127744</span> &amp;&amp; x &lt;= <span class="hljs-number">127776</span> || x &gt;= <span class="hljs-number">127789</span> &amp;&amp; x &lt;= <span class="hljs-number">127797</span> || x &gt;= <span class="hljs-number">127799</span> &amp;&amp; x &lt;= <span class="hljs-number">127868</span> || x &gt;= <span class="hljs-number">127870</span> &amp;&amp; x &lt;= <span class="hljs-number">127891</span> || x &gt;= <span class="hljs-number">127904</span> &amp;&amp; x &lt;= <span class="hljs-number">127946</span> || x &gt;= <span class="hljs-number">127951</span> &amp;&amp; x &lt;= <span class="hljs-number">127955</span> || x &gt;= <span class="hljs-number">127968</span> &amp;&amp; x &lt;= <span class="hljs-number">127984</span> || x === <span class="hljs-number">127988</span> || x &gt;= <span class="hljs-number">127992</span> &amp;&amp; x &lt;= <span class="hljs-number">128062</span> || x === <span class="hljs-number">128064</span> || x &gt;= <span class="hljs-number">128066</span> &amp;&amp; x &lt;= <span class="hljs-number">128252</span> || x &gt;= <span class="hljs-number">128255</span> &amp;&amp; x &lt;= <span class="hljs-number">128317</span> || x &gt;= <span class="hljs-number">128331</span> &amp;&amp; x &lt;= <span class="hljs-number">128334</span> || x &gt;= <span class="hljs-number">128336</span> &amp;&amp; x &lt;= <span class="hljs-number">128359</span> || x === <span class="hljs-number">128378</span> || x === <span class="hljs-number">128405</span> || x === <span class="hljs-number">128406</span> || x === <span class="hljs-number">128420</span> || x &gt;= <span class="hljs-number">128507</span> &amp;&amp; x &lt;= <span class="hljs-number">128591</span> || x &gt;= <span class="hljs-number">128640</span> &amp;&amp; x &lt;= <span class="hljs-number">128709</span> || x === <span class="hljs-number">128716</span> || x &gt;= <span class="hljs-number">128720</span> &amp;&amp; x &lt;= <span class="hljs-number">128722</span> || x &gt;= <span class="hljs-number">128725</span> &amp;&amp; x &lt;= <span class="hljs-number">128727</span> || x &gt;= <span class="hljs-number">128732</span> &amp;&amp; x &lt;= <span class="hljs-number">128735</span> || x === <span class="hljs-number">128747</span> || x === <span class="hljs-number">128748</span> || x &gt;= <span class="hljs-number">128756</span> &amp;&amp; x &lt;= <span class="hljs-number">128764</span> || x &gt;= <span class="hljs-number">128992</span> &amp;&amp; x &lt;= <span class="hljs-number">129003</span> || x === <span class="hljs-number">129008</span> || x &gt;= <span class="hljs-number">129292</span> &amp;&amp; x &lt;= <span class="hljs-number">129338</span> || x &gt;= <span class="hljs-number">129340</span> &amp;&amp; x &lt;= <span class="hljs-number">129349</span> || x &gt;= <span class="hljs-number">129351</span> &amp;&amp; x &lt;= <span class="hljs-number">129535</span> || x &gt;= <span class="hljs-number">129648</span> &amp;&amp; x &lt;= <span class="hljs-number">129660</span> || x &gt;= <span class="hljs-number">129664</span> &amp;&amp; x &lt;= <span class="hljs-number">129673</span> || x &gt;= <span class="hljs-number">129679</span> &amp;&amp; x &lt;= <span class="hljs-number">129734</span> || x &gt;= <span class="hljs-number">129742</span> &amp;&amp; x &lt;= <span class="hljs-number">129756</span> || x &gt;= <span class="hljs-number">129759</span> &amp;&amp; x &lt;= <span class="hljs-number">129769</span> || x &gt;= <span class="hljs-number">129776</span> &amp;&amp; x &lt;= <span class="hljs-number">129784</span> || x &gt;= <span class="hljs-number">131072</span> &amp;&amp; x &lt;= <span class="hljs-number">196605</span> || x &gt;= <span class="hljs-number">196608</span> &amp;&amp; x &lt;= <span class="hljs-number">262141</span>;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<p>node_modules/get-east-asian-width/index.js</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> _isNarrowWidth = <span class="hljs-function">(<span class="hljs-params">codePoint</span>) =&gt;</span> !(isFullWidth(codePoint) || isWide(codePoint));

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<p>src/utils/get-string-width.js</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> notAsciiRegex = <span class="hljs-regexp">/[^\x20-\x7F]/u</span>;
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getStringWidth</span>(<span class="hljs-params">text</span>) </span>{
    <span class="hljs-keyword">if</span> (!text) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }
    <span class="hljs-keyword">if</span> (!notAsciiRegex.test(text)) {
      <span class="hljs-keyword">return</span> text.length;
    }
    text = text.replace(emoji_regex_default(), <span class="hljs-string">"  "</span>);
    <span class="hljs-keyword">let</span> width = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> character <span class="hljs-keyword">of</span> text) {
      <span class="hljs-keyword">const</span> codePoint = character.codePointAt(<span class="hljs-number">0</span>);
      <span class="hljs-keyword">if</span> (codePoint &lt;= <span class="hljs-number">31</span> || codePoint &gt;= <span class="hljs-number">127</span> &amp;&amp; codePoint &lt;= <span class="hljs-number">159</span>) {
        <span class="hljs-keyword">continue</span>;
      }
      <span class="hljs-keyword">if</span> (codePoint &gt;= <span class="hljs-number">768</span> &amp;&amp; codePoint &lt;= <span class="hljs-number">879</span>) {
        <span class="hljs-keyword">continue</span>;
      }
      width += _isNarrowWidth(codePoint) ? <span class="hljs-number">1</span> : <span class="hljs-number">2</span>;
    }
    <span class="hljs-keyword">return</span> width;
  }
  <span class="hljs-keyword">var</span> get_string_width_default = getStringWidth;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<p>src/document/printer.js</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> MODE_BREAK = <span class="hljs-built_in">Symbol</span>(<span class="hljs-string">"MODE_BREAK"</span>);
  <span class="hljs-keyword">var</span> MODE_FLAT = <span class="hljs-built_in">Symbol</span>(<span class="hljs-string">"MODE_FLAT"</span>);
  <span class="hljs-keyword">var</span> CURSOR_PLACEHOLDER = <span class="hljs-built_in">Symbol</span>(<span class="hljs-string">"cursor"</span>);
  <span class="hljs-keyword">var</span> DOC_FILL_PRINTED_LENGTH = <span class="hljs-built_in">Symbol</span>(<span class="hljs-string">"DOC_FILL_PRINTED_LENGTH"</span>);
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rootIndent</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">value</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">length</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">queue</span>: [] };
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeIndent</span>(<span class="hljs-params">ind, options</span>) </span>{
    <span class="hljs-keyword">return</span> generateInd(ind, { <span class="hljs-attr">type</span>: <span class="hljs-string">"indent"</span> }, options);
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeAlign</span>(<span class="hljs-params">indent2, widthOrDoc, options</span>) </span>{
    <span class="hljs-keyword">if</span> (widthOrDoc === <span class="hljs-built_in">Number</span>.NEGATIVE_INFINITY) {
      <span class="hljs-keyword">return</span> indent2.root || rootIndent();
    }
    <span class="hljs-keyword">if</span> (widthOrDoc &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> generateInd(indent2, { <span class="hljs-attr">type</span>: <span class="hljs-string">"dedent"</span> }, options);
    }
    <span class="hljs-keyword">if</span> (!widthOrDoc) {
      <span class="hljs-keyword">return</span> indent2;
    }
    <span class="hljs-keyword">if</span> (widthOrDoc.type === <span class="hljs-string">"root"</span>) {
      <span class="hljs-keyword">return</span> { ...indent2, <span class="hljs-attr">root</span>: indent2 };
    }
    <span class="hljs-keyword">const</span> alignType = <span class="hljs-keyword">typeof</span> widthOrDoc === <span class="hljs-string">"string"</span> ? <span class="hljs-string">"stringAlign"</span> : <span class="hljs-string">"numberAlign"</span>;
    <span class="hljs-keyword">return</span> generateInd(indent2, { <span class="hljs-attr">type</span>: alignType, <span class="hljs-attr">n</span>: widthOrDoc }, options);
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateInd</span>(<span class="hljs-params">ind, newPart, options</span>) </span>{
    <span class="hljs-keyword">const</span> queue = newPart.type === <span class="hljs-string">"dedent"</span> ? ind.queue.slice(<span class="hljs-number">0</span>, <span class="hljs-number">-1</span>) : [...ind.queue, newPart];
    <span class="hljs-keyword">let</span> value = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">let</span> length = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> lastTabs = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> lastSpaces = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> part <span class="hljs-keyword">of</span> queue) {
      <span class="hljs-keyword">switch</span> (part.type) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"indent"</span>:
          flush();
          <span class="hljs-keyword">if</span> (options.useTabs) {
            addTabs(<span class="hljs-number">1</span>);
          } <span class="hljs-keyword">else</span> {
            addSpaces(options.tabWidth);
          }
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">"stringAlign"</span>:
          flush();
          value += part.n;
          length += part.n.length;
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">"numberAlign"</span>:
          lastTabs += <span class="hljs-number">1</span>;
          lastSpaces += part.n;
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">default</span>:
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unexpected type '<span class="hljs-subst">${part.type}</span>'`</span>);
      }
    }
    flushSpaces();
    <span class="hljs-keyword">return</span> { ...ind, value, length, queue };
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addTabs</span>(<span class="hljs-params">count</span>) </span>{
      value += <span class="hljs-string">"	"</span>.repeat(count);
      length += options.tabWidth * count;
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addSpaces</span>(<span class="hljs-params">count</span>) </span>{
      value += <span class="hljs-string">" "</span>.repeat(count);
      length += count;
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flush</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">if</span> (options.useTabs) {
        flushTabs();
      } <span class="hljs-keyword">else</span> {
        flushSpaces();
      }
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flushTabs</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">if</span> (lastTabs &gt; <span class="hljs-number">0</span>) {
        addTabs(lastTabs);
      }
      resetLast();
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flushSpaces</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">if</span> (lastSpaces &gt; <span class="hljs-number">0</span>) {
        addSpaces(lastSpaces);
      }
      resetLast();
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resetLast</span>(<span class="hljs-params"></span>) </span>{
      lastTabs = <span class="hljs-number">0</span>;
      lastSpaces = <span class="hljs-number">0</span>;
    }
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">trim2</span>(<span class="hljs-params">out</span>) </span>{
    <span class="hljs-keyword">let</span> trimCount = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> cursorCount = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> outIndex = out.length;
    outer: <span class="hljs-keyword">while</span> (outIndex--) {
      <span class="hljs-keyword">const</span> last = out[outIndex];
      <span class="hljs-keyword">if</span> (last === CURSOR_PLACEHOLDER) {
        cursorCount++;
        <span class="hljs-keyword">continue</span>;
      }
      <span class="hljs-keyword">if</span> (<span class="hljs-literal">false</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unexpected value in trim: '<span class="hljs-subst">${<span class="hljs-keyword">typeof</span> last}</span>'`</span>);
      }
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> charIndex = last.length - <span class="hljs-number">1</span>; charIndex &gt;= <span class="hljs-number">0</span>; charIndex--) {
        <span class="hljs-keyword">const</span> char = last[charIndex];
        <span class="hljs-keyword">if</span> (char === <span class="hljs-string">" "</span> || char === <span class="hljs-string">"	"</span>) {
          trimCount++;
        } <span class="hljs-keyword">else</span> {
          out[outIndex] = last.slice(<span class="hljs-number">0</span>, charIndex + <span class="hljs-number">1</span>);
          <span class="hljs-keyword">break</span> outer;
        }
      }
    }
    <span class="hljs-keyword">if</span> (trimCount &gt; <span class="hljs-number">0</span> || cursorCount &gt; <span class="hljs-number">0</span>) {
      out.length = outIndex + <span class="hljs-number">1</span>;
      <span class="hljs-keyword">while</span> (cursorCount-- &gt; <span class="hljs-number">0</span>) {
        out.push(CURSOR_PLACEHOLDER);
      }
    }
    <span class="hljs-keyword">return</span> trimCount;
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fits</span>(<span class="hljs-params">next, restCommands, width, hasLineSuffix, groupModeMap, mustBeFlat</span>) </span>{
    <span class="hljs-keyword">if</span> (width === <span class="hljs-built_in">Number</span>.POSITIVE_INFINITY) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">let</span> restIdx = restCommands.length;
    <span class="hljs-keyword">const</span> cmds = [next];
    <span class="hljs-keyword">const</span> out = [];
    <span class="hljs-keyword">while</span> (width &gt;= <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">if</span> (cmds.length === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">if</span> (restIdx === <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        cmds.push(restCommands[--restIdx]);
        <span class="hljs-keyword">continue</span>;
      }
      <span class="hljs-keyword">const</span> { mode, doc } = cmds.pop();
      <span class="hljs-keyword">const</span> docType = get_doc_type_default(doc);
      <span class="hljs-keyword">switch</span> (docType) {
        <span class="hljs-keyword">case</span> DOC_TYPE_STRING:
          out.push(doc);
          width -= get_string_width_default(doc);
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOC_TYPE_ARRAY:
        <span class="hljs-keyword">case</span> DOC_TYPE_FILL: {
          <span class="hljs-keyword">const</span> parts = docType === DOC_TYPE_ARRAY ? doc : doc.parts;
          <span class="hljs-keyword">const</span> end = doc[DOC_FILL_PRINTED_LENGTH] ?? <span class="hljs-number">0</span>;
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = parts.length - <span class="hljs-number">1</span>; i &gt;= end; i--) {
            cmds.push({ mode, <span class="hljs-attr">doc</span>: parts[i] });
          }
          <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">case</span> DOC_TYPE_INDENT:
        <span class="hljs-keyword">case</span> DOC_TYPE_ALIGN:
        <span class="hljs-keyword">case</span> DOC_TYPE_INDENT_IF_BREAK:
        <span class="hljs-keyword">case</span> DOC_TYPE_LABEL:
          cmds.push({ mode, <span class="hljs-attr">doc</span>: doc.contents });
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOC_TYPE_TRIM:
          width += trim2(out);
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOC_TYPE_GROUP: {
          <span class="hljs-keyword">if</span> (mustBeFlat &amp;&amp; doc.break) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
          }
          <span class="hljs-keyword">const</span> groupMode = doc.break ? MODE_BREAK : mode;
          <span class="hljs-keyword">const</span> contents = doc.expandedStates &amp;&amp; groupMode === MODE_BREAK ? at_default(
            <span class="hljs-comment">/* isOptionalObject */</span>
            <span class="hljs-literal">false</span>,
            doc.expandedStates,
            <span class="hljs-number">-1</span>
          ) : doc.contents;
          cmds.push({ <span class="hljs-attr">mode</span>: groupMode, <span class="hljs-attr">doc</span>: contents });
          <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">case</span> DOC_TYPE_IF_BREAK: {
          <span class="hljs-keyword">const</span> groupMode = doc.groupId ? groupModeMap[doc.groupId] || MODE_FLAT : mode;
          <span class="hljs-keyword">const</span> contents = groupMode === MODE_BREAK ? doc.breakContents : doc.flatContents;
          <span class="hljs-keyword">if</span> (contents) {
            cmds.push({ mode, <span class="hljs-attr">doc</span>: contents });
          }
          <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">case</span> DOC_TYPE_LINE:
          <span class="hljs-keyword">if</span> (mode === MODE_BREAK || doc.hard) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
          }
          <span class="hljs-keyword">if</span> (!doc.soft) {
            out.push(<span class="hljs-string">" "</span>);
            width--;
          }
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOC_TYPE_LINE_SUFFIX:
          hasLineSuffix = <span class="hljs-literal">true</span>;
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOC_TYPE_LINE_SUFFIX_BOUNDARY:
          <span class="hljs-keyword">if</span> (hasLineSuffix) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
          }
          <span class="hljs-keyword">break</span>;
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printDocToString</span>(<span class="hljs-params">doc, options</span>) </span>{
    <span class="hljs-keyword">const</span> groupModeMap = {};
    <span class="hljs-keyword">const</span> width = options.printWidth;
    <span class="hljs-keyword">const</span> newLine = convertEndOfLineToChars(options.endOfLine);
    <span class="hljs-keyword">let</span> pos = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> cmds = [{ <span class="hljs-attr">ind</span>: rootIndent(), <span class="hljs-attr">mode</span>: MODE_BREAK, doc }];
    <span class="hljs-keyword">const</span> out = [];
    <span class="hljs-keyword">let</span> shouldRemeasure = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">const</span> lineSuffix2 = [];
    <span class="hljs-keyword">let</span> printedCursorCount = <span class="hljs-number">0</span>;
    propagateBreaks(doc);
    <span class="hljs-keyword">while</span> (cmds.length &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">const</span> { ind, mode, <span class="hljs-attr">doc</span>: doc2 } = cmds.pop();
      <span class="hljs-keyword">switch</span> (get_doc_type_default(doc2)) {
        <span class="hljs-keyword">case</span> DOC_TYPE_STRING: {
          <span class="hljs-keyword">const</span> formatted = newLine !== <span class="hljs-string">"\n"</span> ? string_replace_all_default(
            <span class="hljs-comment">/* isOptionalObject */</span>
            <span class="hljs-literal">false</span>,
            doc2,
            <span class="hljs-string">"\n"</span>,
            newLine
          ) : doc2;
          out.push(formatted);
          <span class="hljs-keyword">if</span> (cmds.length &gt; <span class="hljs-number">0</span>) {
            pos += get_string_width_default(formatted);
          }
          <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">case</span> DOC_TYPE_ARRAY:
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = doc2.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
            cmds.push({ ind, mode, <span class="hljs-attr">doc</span>: doc2[i] });
          }
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOC_TYPE_CURSOR:
          <span class="hljs-keyword">if</span> (printedCursorCount &gt;= <span class="hljs-number">2</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"There are too many 'cursor' in doc."</span>);
          }
          out.push(CURSOR_PLACEHOLDER);
          printedCursorCount++;
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOC_TYPE_INDENT:
          cmds.push({ <span class="hljs-attr">ind</span>: makeIndent(ind, options), mode, <span class="hljs-attr">doc</span>: doc2.contents });
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOC_TYPE_ALIGN:
          cmds.push({
            <span class="hljs-attr">ind</span>: makeAlign(ind, doc2.n, options),
            mode,
            <span class="hljs-attr">doc</span>: doc2.contents
          });
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOC_TYPE_TRIM:
          pos -= trim2(out);
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOC_TYPE_GROUP:
          <span class="hljs-keyword">switch</span> (mode) {
            <span class="hljs-keyword">case</span> MODE_FLAT:
              <span class="hljs-keyword">if</span> (!shouldRemeasure) {
                cmds.push({
                  ind,
                  <span class="hljs-attr">mode</span>: doc2.break ? MODE_BREAK : MODE_FLAT,
                  <span class="hljs-attr">doc</span>: doc2.contents
                });
                <span class="hljs-keyword">break</span>;
              }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<p>fallthrough</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">case</span> MODE_BREAK: {
              shouldRemeasure = <span class="hljs-literal">false</span>;
              <span class="hljs-keyword">const</span> next = { ind, <span class="hljs-attr">mode</span>: MODE_FLAT, <span class="hljs-attr">doc</span>: doc2.contents };
              <span class="hljs-keyword">const</span> rem = width - pos;
              <span class="hljs-keyword">const</span> hasLineSuffix = lineSuffix2.length &gt; <span class="hljs-number">0</span>;
              <span class="hljs-keyword">if</span> (!doc2.break &amp;&amp; fits(next, cmds, rem, hasLineSuffix, groupModeMap)) {
                cmds.push(next);
              } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span> (doc2.expandedStates) {
                  <span class="hljs-keyword">const</span> mostExpanded = at_default(
                    <span class="hljs-comment">/* isOptionalObject */</span>
                    <span class="hljs-literal">false</span>,
                    doc2.expandedStates,
                    <span class="hljs-number">-1</span>
                  );
                  <span class="hljs-keyword">if</span> (doc2.break) {
                    cmds.push({ ind, <span class="hljs-attr">mode</span>: MODE_BREAK, <span class="hljs-attr">doc</span>: mostExpanded });
                    <span class="hljs-keyword">break</span>;
                  } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; doc2.expandedStates.length + <span class="hljs-number">1</span>; i++) {
                      <span class="hljs-keyword">if</span> (i &gt;= doc2.expandedStates.length) {
                        cmds.push({ ind, <span class="hljs-attr">mode</span>: MODE_BREAK, <span class="hljs-attr">doc</span>: mostExpanded });
                        <span class="hljs-keyword">break</span>;
                      } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">const</span> state = doc2.expandedStates[i];
                        <span class="hljs-keyword">const</span> cmd = { ind, <span class="hljs-attr">mode</span>: MODE_FLAT, <span class="hljs-attr">doc</span>: state };
                        <span class="hljs-keyword">if</span> (fits(cmd, cmds, rem, hasLineSuffix, groupModeMap)) {
                          cmds.push(cmd);
                          <span class="hljs-keyword">break</span>;
                        }
                      }
                    }
                  }
                } <span class="hljs-keyword">else</span> {
                  cmds.push({ ind, <span class="hljs-attr">mode</span>: MODE_BREAK, <span class="hljs-attr">doc</span>: doc2.contents });
                }
              }
              <span class="hljs-keyword">break</span>;
            }
          }
          <span class="hljs-keyword">if</span> (doc2.id) {
            groupModeMap[doc2.id] = at_default(
              <span class="hljs-comment">/* isOptionalObject */</span>
              <span class="hljs-literal">false</span>,
              cmds,
              <span class="hljs-number">-1</span>
            ).mode;
          }
          <span class="hljs-keyword">break</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<p>Fills each line with as much code as possible before moving to a new
line with the same indentation.</p>
<p>Expects doc.parts to be an array of alternating content and
whitespace. The whitespace contains the linebreaks.</p>
<p>For example:
[&quot;I&quot;, line, &quot;love&quot;, line, &quot;monkeys&quot;]
or
[{ type: group, ... }, softline, { type: group, ... }]</p>
<p>It uses this parts structure to handle three main layout cases:</p>
<ul>
<li>The first two content items fit on the same line without
breaking
-&gt; output the first content item and the whitespace &quot;flat&quot;.</li>
<li>Only the first content item fits on the line without breaking
-&gt; output the first content item &quot;flat&quot; and the whitespace with
&quot;break&quot;.</li>
<li>Neither content item fits on the line without breaking
-&gt; output the first content item and the whitespace with &quot;break&quot;.</li>
</ul>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">case</span> DOC_TYPE_FILL: {
          <span class="hljs-keyword">const</span> rem = width - pos;
          <span class="hljs-keyword">const</span> offset = doc2[DOC_FILL_PRINTED_LENGTH] ?? <span class="hljs-number">0</span>;
          <span class="hljs-keyword">const</span> { parts } = doc2;
          <span class="hljs-keyword">const</span> length = parts.length - offset;
          <span class="hljs-keyword">if</span> (length === <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">break</span>;
          }
          <span class="hljs-keyword">const</span> content = parts[offset + <span class="hljs-number">0</span>];
          <span class="hljs-keyword">const</span> whitespace = parts[offset + <span class="hljs-number">1</span>];
          <span class="hljs-keyword">const</span> contentFlatCmd = { ind, <span class="hljs-attr">mode</span>: MODE_FLAT, <span class="hljs-attr">doc</span>: content };
          <span class="hljs-keyword">const</span> contentBreakCmd = { ind, <span class="hljs-attr">mode</span>: MODE_BREAK, <span class="hljs-attr">doc</span>: content };
          <span class="hljs-keyword">const</span> contentFits = fits(
            contentFlatCmd,
            [],
            rem,
            lineSuffix2.length &gt; <span class="hljs-number">0</span>,
            groupModeMap,
            <span class="hljs-literal">true</span>
          );
          <span class="hljs-keyword">if</span> (length === <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">if</span> (contentFits) {
              cmds.push(contentFlatCmd);
            } <span class="hljs-keyword">else</span> {
              cmds.push(contentBreakCmd);
            }
            <span class="hljs-keyword">break</span>;
          }
          <span class="hljs-keyword">const</span> whitespaceFlatCmd = { ind, <span class="hljs-attr">mode</span>: MODE_FLAT, <span class="hljs-attr">doc</span>: whitespace };
          <span class="hljs-keyword">const</span> whitespaceBreakCmd = { ind, <span class="hljs-attr">mode</span>: MODE_BREAK, <span class="hljs-attr">doc</span>: whitespace };
          <span class="hljs-keyword">if</span> (length === <span class="hljs-number">2</span>) {
            <span class="hljs-keyword">if</span> (contentFits) {
              cmds.push(whitespaceFlatCmd, contentFlatCmd);
            } <span class="hljs-keyword">else</span> {
              cmds.push(whitespaceBreakCmd, contentBreakCmd);
            }
            <span class="hljs-keyword">break</span>;
          }
          <span class="hljs-keyword">const</span> secondContent = parts[offset + <span class="hljs-number">2</span>];
          <span class="hljs-keyword">const</span> remainingCmd = {
            ind,
            mode,
            <span class="hljs-attr">doc</span>: { ...doc2, [DOC_FILL_PRINTED_LENGTH]: offset + <span class="hljs-number">2</span> }
          };
          <span class="hljs-keyword">const</span> firstAndSecondContentFlatCmd = {
            ind,
            <span class="hljs-attr">mode</span>: MODE_FLAT,
            <span class="hljs-attr">doc</span>: [content, whitespace, secondContent]
          };
          <span class="hljs-keyword">const</span> firstAndSecondContentFits = fits(
            firstAndSecondContentFlatCmd,
            [],
            rem,
            lineSuffix2.length &gt; <span class="hljs-number">0</span>,
            groupModeMap,
            <span class="hljs-literal">true</span>
          );
          <span class="hljs-keyword">if</span> (firstAndSecondContentFits) {
            cmds.push(remainingCmd, whitespaceFlatCmd, contentFlatCmd);
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contentFits) {
            cmds.push(remainingCmd, whitespaceBreakCmd, contentFlatCmd);
          } <span class="hljs-keyword">else</span> {
            cmds.push(remainingCmd, whitespaceBreakCmd, contentBreakCmd);
          }
          <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">case</span> DOC_TYPE_IF_BREAK:
        <span class="hljs-keyword">case</span> DOC_TYPE_INDENT_IF_BREAK: {
          <span class="hljs-keyword">const</span> groupMode = doc2.groupId ? groupModeMap[doc2.groupId] : mode;
          <span class="hljs-keyword">if</span> (groupMode === MODE_BREAK) {
            <span class="hljs-keyword">const</span> breakContents = doc2.type === DOC_TYPE_IF_BREAK ? doc2.breakContents : doc2.negate ? doc2.contents : indent(doc2.contents);
            <span class="hljs-keyword">if</span> (breakContents) {
              cmds.push({ ind, mode, <span class="hljs-attr">doc</span>: breakContents });
            }
          }
          <span class="hljs-keyword">if</span> (groupMode === MODE_FLAT) {
            <span class="hljs-keyword">const</span> flatContents = doc2.type === DOC_TYPE_IF_BREAK ? doc2.flatContents : doc2.negate ? indent(doc2.contents) : doc2.contents;
            <span class="hljs-keyword">if</span> (flatContents) {
              cmds.push({ ind, mode, <span class="hljs-attr">doc</span>: flatContents });
            }
          }
          <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">case</span> DOC_TYPE_LINE_SUFFIX:
          lineSuffix2.push({ ind, mode, <span class="hljs-attr">doc</span>: doc2.contents });
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOC_TYPE_LINE_SUFFIX_BOUNDARY:
          <span class="hljs-keyword">if</span> (lineSuffix2.length &gt; <span class="hljs-number">0</span>) {
            cmds.push({ ind, mode, <span class="hljs-attr">doc</span>: hardlineWithoutBreakParent });
          }
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOC_TYPE_LINE:
          <span class="hljs-keyword">switch</span> (mode) {
            <span class="hljs-keyword">case</span> MODE_FLAT:
              <span class="hljs-keyword">if</span> (!doc2.hard) {
                <span class="hljs-keyword">if</span> (!doc2.soft) {
                  out.push(<span class="hljs-string">" "</span>);
                  pos += <span class="hljs-number">1</span>;
                }
                <span class="hljs-keyword">break</span>;
              } <span class="hljs-keyword">else</span> {
                shouldRemeasure = <span class="hljs-literal">true</span>;
              }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<p>fallthrough</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">case</span> MODE_BREAK:
              <span class="hljs-keyword">if</span> (lineSuffix2.length &gt; <span class="hljs-number">0</span>) {
                cmds.push({ ind, mode, <span class="hljs-attr">doc</span>: doc2 }, ...lineSuffix2.reverse());
                lineSuffix2.length = <span class="hljs-number">0</span>;
                <span class="hljs-keyword">break</span>;
              }
              <span class="hljs-keyword">if</span> (doc2.literal) {
                <span class="hljs-keyword">if</span> (ind.root) {
                  out.push(newLine, ind.root.value);
                  pos = ind.root.length;
                } <span class="hljs-keyword">else</span> {
                  out.push(newLine);
                  pos = <span class="hljs-number">0</span>;
                }
              } <span class="hljs-keyword">else</span> {
                pos -= trim2(out);
                out.push(newLine + ind.value);
                pos = ind.length;
              }
              <span class="hljs-keyword">break</span>;
          }
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOC_TYPE_LABEL:
          cmds.push({ ind, mode, <span class="hljs-attr">doc</span>: doc2.contents });
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOC_TYPE_BREAK_PARENT:
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">default</span>:
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> invalid_doc_error_default(doc2);
      }
      <span class="hljs-keyword">if</span> (cmds.length === <span class="hljs-number">0</span> &amp;&amp; lineSuffix2.length &gt; <span class="hljs-number">0</span>) {
        cmds.push(...lineSuffix2.reverse());
        lineSuffix2.length = <span class="hljs-number">0</span>;
      }
    }
    <span class="hljs-keyword">const</span> cursorPlaceholderIndex = out.indexOf(CURSOR_PLACEHOLDER);
    <span class="hljs-keyword">if</span> (cursorPlaceholderIndex !== <span class="hljs-number">-1</span>) {
      <span class="hljs-keyword">const</span> otherCursorPlaceholderIndex = out.indexOf(
        CURSOR_PLACEHOLDER,
        cursorPlaceholderIndex + <span class="hljs-number">1</span>
      );
      <span class="hljs-keyword">if</span> (otherCursorPlaceholderIndex === <span class="hljs-number">-1</span>) {
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">formatted</span>: out.filter(<span class="hljs-function">(<span class="hljs-params">char</span>) =&gt;</span> char !== CURSOR_PLACEHOLDER).join(<span class="hljs-string">""</span>)
        };
      }
      <span class="hljs-keyword">const</span> beforeCursor = out.slice(<span class="hljs-number">0</span>, cursorPlaceholderIndex).join(<span class="hljs-string">""</span>);
      <span class="hljs-keyword">const</span> aroundCursor = out.slice(cursorPlaceholderIndex + <span class="hljs-number">1</span>, otherCursorPlaceholderIndex).join(<span class="hljs-string">""</span>);
      <span class="hljs-keyword">const</span> afterCursor = out.slice(otherCursorPlaceholderIndex + <span class="hljs-number">1</span>).join(<span class="hljs-string">""</span>);
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">formatted</span>: beforeCursor + aroundCursor + afterCursor,
        <span class="hljs-attr">cursorNodeStart</span>: beforeCursor.length,
        <span class="hljs-attr">cursorNodeText</span>: aroundCursor
      };
    }
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">formatted</span>: out.join(<span class="hljs-string">""</span>) };
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<p>src/document/public.js</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> builders = {
    join,
    line,
    softline,
    hardline,
    literalline,
    group,
    conditionalGroup,
    fill,
    lineSuffix,
    lineSuffixBoundary,
    cursor,
    breakParent,
    ifBreak,
    trim,
    indent,
    indentIfBreak,
    align,
    addAlignmentToDoc,
    markAsRoot,
    dedentToRoot,
    dedent,
    hardlineWithoutBreakParent,
    literallineWithoutBreakParent,
    label,
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<p>TODO: Remove this in v4</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    concat: <span class="hljs-function">(<span class="hljs-params">parts</span>) =&gt;</span> parts
  };
  <span class="hljs-keyword">var</span> printer = { printDocToString };
  <span class="hljs-keyword">var</span> utils = {
    willBreak,
    <span class="hljs-attr">traverseDoc</span>: traverse_doc_default,
    findInDoc,
    mapDoc,
    removeLines,
    stripTrailingHardline,
    replaceEndOfLine,
    canBreak
  };
  <span class="hljs-keyword">return</span> __toCommonJS(public_exports);
});
</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
